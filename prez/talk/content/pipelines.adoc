= Ils emménagent ensemble : les pipelines

(HDD : Hype Driven Development :D)

[.notes]
--
On va aborder quelques experiences vécues et les leçons que nous en avons tiré
--

== Quelques REX

== Le cas "Faites ce que vous voulez" (OAB)

* Objectif : industrialisez car c'est bien  (en gros, trouver un truc pour qu'on gagne plus d'argent)

* Problème : fait par des devs pour des devs

[.notes]
--
Yann: Industrialisation chez OAB
--

=== Résultat

* Le process CI/CD fonctionne très bien
* Métriques qualité précises et top

* Obligé de bloquer certains jobs pour que ça ne parte pas en prod
* Les managers ne comprennent pas ce qu'il se passe
* Aucun contrôle du process

== Le cas "Equipe devops dans sa tour d'ivoire" (MEAE)

=== Le contexte

* ReactJs
* Artifactory
* Framework maison
* VM standard pour la recette

[.notes]
--
* Contexte particulier, silotage fort entre les équipes
* Pas de relation avec les équipes de dev
--

=== Le besoin

La mission demandée par le client :

* Automatisation de la CI autour du framework
* Déploiement auto en recette
* Mise à dispo aux équipes de dev par la doc ...

=== Mal vécu et inutile

* Pas d'adhésion des équipes de dev
* Vécu comme une punition, pas comme une aide
* Ne correspond pas à leur manière de travailler

=== Ex.: Sonar

* Sonar : analyses post-commit
* Les règles de nommage ne sont pas normalisées entre les projets
* L'architecture des projets n'est pas normalisées non plus
* La configuration des postes n'est pas la même que celle de Sonar

=== Ex.: Build

* L'enfer, chaque projet avait une stratégie de build différente

=== Résultat

* 6 mois de travail

* ne correspond pas au besoin des équipes de dev/managers
* trop rigide par rapport à la diversité des types de projet
* difficile à mettre en place
* trop spécifique

* V2 en cours ...

== Une méthode plus que des outils

* Pipeline == implémentation d'un process de CI/CD
* Pipeline != script

== La définition d'un pipeline par le bon bout

=== 1 - Définir les objectifs de notre CI

Définition des contraintes du projet :

* Besoin spécifique en perf/sécurité/qualité/accessibilité, etc ?
* Build complexe ? Multi plateforme ?
* Règles de l'entreprise à respecter (nommage, peu importe en fait)
* Qui doit voir quoi ? quand ? et surtout comment ?

[.notes]
--
Typiquement, on ne va pas attendre la même chose de la CI sur du Web que d'une appli lourde pour des drones.
--

=== 1 - Définir les objectifs de notre CI

Et on fait des dessins !
[.notes]
--
--

=== 2 - Analyser les process de dev/déploiement existant

Mise en place d'une CI :

* Normalisation du process de dev
* Ne pas "révolutionner" le process de dev
* C'est un outil qui doit aider et non pas être une contrainte

[.notes]
--
On va chercher une adhésion des utilisateurs, sinon c'est inutile ou ce sera mal vécu
--

=== 3 - Etapes clés/cas particuliers

On va déterminer les étapes clés du process (souvent lors d'un changement d'acteur)

Ex.:

* On déploie tous les mois
* On a une équipe dédiée à vérifier que les titres sont en rouge
* Il n'y a que le lead qui peut builder l'application
* Les clés d'accès aux plateformes sont détenus par le chef uniquement

=== 4 - Les retours/métriques

En fonction des utilisateurs :

* Niveau de précision (un indicateur/la totale)
* Facilité d'accès (page web, envoie de mail, fichier, mail, etc.)
* Intégration dans un système existant ?

=== 5 - Automatiser ou ne pas automatiser ?

Tout automatiser n'est pas toujours (voir rarement) la meilleure solution.

* Complexité
* Process
* Equipes dev/ops différentes
* CI / CD : problématiques/besoins différents
* Déploiement auto sur tous les environnements ?

[.notes]
--
C'est à ce moment qu'on se rend compte que CI et CD ne sont pas DU TOUT le même chose, en particulier pour du déploiement auto
Ca permet d'éliminer immédiatement des problématiques d'implémentation
MAIS ça reste de le process
--

=== 6 - Choix des outils

On peut enfin choisir l'outillage.

* Ils doivent pouvoir implémenter les règles découvertes par les étapes précédentes
* CI : on se calle généralement sur les outils classiques du langage/metier
* CD : ... ben ça dépend des stacks, process, etc.

=== 7 - On commence seulement à implémenter

* On a les process
* On a les acteurs
* On a les métriques
* On a les outils

Let's go dev !
